{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/Daniel/Desktop/DGS web/DGS-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Daniel/Desktop/DGS web/DGS-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Daniel\\\\Desktop\\\\DGS web\\\\DGS-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect,useState}from'react';import{db}from'../../firebase';import{addDoc,collection,onSnapshot,doc,serverTimestamp,updateDoc,deleteDoc,query}from\"@firebase/firestore\";import{getDownloadURL,ref,uploadString}from'@firebase/storage';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import'./Post.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Post(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),newPost=_useState2[0],setNewPost=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),title=_useState6[0],setTitle=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),text=_useState8[0],setText=_useState8[1];var _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),user=_useState10[0],setUser=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),show=_useState12[0],setShow=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),postId=_useState14[0],setPostId=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),pastTitle=_useState16[0],setPastTitle=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),pastText=_useState18[0],setPastText=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),posts=_useState20[0],setPosts=_useState20[1];var _useState21=useState(\"\"),_useState22=_slicedToArray(_useState21,2),deleteId=_useState22[0],setDeleteId=_useState22[1];useEffect(function(){setUser(JSON.parse(localStorage.getItem('token')));},[]);useEffect(function(){return onSnapshot(query(collection(db,'posts')),function(snapshots){return setPosts(snapshots.docs);});},[db]);var DeleteId=function DeleteId(e){setDeleteId(e.target.value);};var PostIdPast=function PostIdPast(e){setPostId(e.target.value);};var changePastTitle=function changePastTitle(e){setPastTitle(e.target.value);};var changePastText=function changePastText(e){setPastText(e.target.value);};var SetPastPost=function SetPastPost(){if(posts){posts.map(function(post){if(post.id===postId){setPastText(post.data().text);setPastTitle(post.data().title);// console.log(post);\n}// console.log(post.data().title);\n});}if(pastText){alert(\"This post doesn't exist in this list\");return;}// console.log(pastText, pastTitle);\nsetShow(!show);};var sendPastPost=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var docRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!loading){_context.next=2;break;}return _context.abrupt(\"return\");case 2:setLoading(true);_context.next=5;return updateDoc(doc(db,'posts',postId),{id:user.uid,title:pastTitle,text:pastText,timestamp:serverTimestamp()}).then(function(res){console.log(res);toast(\"Post upload Successfully\");}).catch(function(err){console.log(err);});case 5:docRef=_context.sent;setLoading(false);setPastText(\"\");setPastTitle(\"\");setPostId(\"\");case 10:case\"end\":return _context.stop();}}},_callee);}));return function sendPastPost(){return _ref.apply(this,arguments);};}();var sendPost=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var docRef;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!loading){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:setLoading(true);_context2.next=5;return addDoc(collection(db,'posts'),{id:user.uid,title:title,text:text,timestamp:serverTimestamp()}).then(function(res){console.log(res);toast(\"Post upload Successfully\");});case 5:docRef=_context2.sent;setLoading(false);setText(\"\");setTitle(\"\");case 9:case\"end\":return _context2.stop();}}},_callee2);}));return function sendPost(){return _ref2.apply(this,arguments);};}();var deletePost=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return deleteDoc(doc(db,\"posts\",deleteId)).then(function(res){toast(\"Delete Successfully\");});case 2:setDeleteId(\"\");case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function deletePost(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[newPost?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"Container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"left\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary _btn btn mb-3\",onClick:function onClick(){return setNewPost(true);},children:\"New Post\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary _btn btn\",onClick:function onClick(){return setNewPost(false);},children:\"Past Post\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-danger mb-3 mt-3\",\"data-toggle\":\"modal\",\"data-target\":\"#exampleModal\",children:\"Delete\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"New Post\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",className:\"form-group mt-2\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter title\",className:\"form-control\",value:title,onChange:function onChange(e){return setTitle(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"post\",className:\"form-group mt-2\",children:\"New Post\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"newpost\",id:\"\",cols:\"30\",rows:\"10\",placeholder:\"Details...\",className:\"form-control\",value:text,onChange:function onChange(e){return setText(e.target.value);},required:true}),!loading&&/*#__PURE__*/_jsx(\"button\",{className:\"_btn btn mt-2\",onClick:function onClick(){return sendPost();},children:\" Post \"})]})})]})]}):/*#__PURE__*/_jsx(_Fragment,{children:show?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"Container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"left\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary _btn btn mb-3\",onClick:function onClick(){return setNewPost(true);},children:\"New Post\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary _btn btn\",onClick:function onClick(){return setNewPost(false);},children:\"Past Post\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-danger mb-3 mt-3\",\"data-toggle\":\"modal\",\"data-target\":\"#exampleModal\",children:\" Delete\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Past Post\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsxs(\"form\",{action:\"\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",className:\"form-group mt-2\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter title\",className:\"form-control\",value:pastTitle,onChange:changePastTitle,required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"post\",className:\"form-group mt-2\",children:\"New Post\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"newpost\",id:\"\",cols:\"30\",rows:\"10\",placeholder:\"Details...\",className:\"form-control\",value:pastText,onChange:changePastText,required:true}),!loading&&/*#__PURE__*/_jsx(\"button\",{className:\"_btn btn mt-2\",onClick:function onClick(){return sendPastPost();},children:\" Post \"})]})})})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"Container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"left\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary _btn btn mb-3\",onClick:function onClick(){return setNewPost(true);},children:\"New Post\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary _btn btn\",onClick:function onClick(){return setNewPost(false);},children:\"Past Post\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-dange mb-3 mt-3r\",\"data-toggle\":\"modal\",\"data-target\":\"#exampleModal\",children:\" Delete\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",className:\"form-group mt-2\",children:\"Post Id\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter id\",className:\"form-control\",value:postId,onChange:PostIdPast,required:true}),/*#__PURE__*/_jsx(\"button\",{className:\"_btn btn mt-2\",onClick:function onClick(){return SetPastPost();},children:\" Click \"})]})]})}),/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsx(\"div\",{class:\"modal fade\",id:\"exampleModal\",tabindex:\"-1\",role:\"dialog\",\"aria-labelledby\":\"exampleModalLabel\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"div\",{class:\"modal-dialog\",role:\"document\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h5\",{class:\"modal-title\",id:\"exampleModalLabel\",style:{color:\"#666\"},children:\"Delete Post\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"close\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\",children:/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:\"\\xD7\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",className:\"form-group mt-2\",style:{color:\"#666\"},children:\"Delete Id\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter id\",className:\"form-control\",value:deleteId,onChange:DeleteId,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"btn btn-secondary\",\"data-dismiss\":\"modal\",children:\"Close\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"btn btn-danger\",onClick:function onClick(){return deletePost();},children:\"Delete\"})]})]})})})]});}export default Post;","map":{"version":3,"sources":["C:/Users/Daniel/Desktop/DGS web/DGS-web/src/components/Admin/Post.js"],"names":["React","useEffect","useState","db","addDoc","collection","onSnapshot","doc","serverTimestamp","updateDoc","deleteDoc","query","getDownloadURL","ref","uploadString","ToastContainer","toast","Post","newPost","setNewPost","loading","setLoading","title","setTitle","text","setText","user","setUser","show","setShow","postId","setPostId","pastTitle","setPastTitle","pastText","setPastText","posts","setPosts","deleteId","setDeleteId","JSON","parse","localStorage","getItem","snapshots","docs","DeleteId","e","target","value","PostIdPast","changePastTitle","changePastText","SetPastPost","map","post","id","data","alert","sendPastPost","uid","timestamp","then","res","console","log","catch","err","docRef","sendPost","deletePost","color"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { db } from '../../firebase';\r\nimport {\r\n    addDoc,\r\n    collection,\r\n    onSnapshot,\r\n    doc,\r\n    serverTimestamp,\r\n    updateDoc,\r\n    deleteDoc,\r\n    query\r\n  } from \"@firebase/firestore\";\r\nimport { getDownloadURL, ref, uploadString} from '@firebase/storage'\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport './Post.css'\r\n\r\n\r\nfunction Post() {\r\n    const [newPost, setNewPost] = useState(true);\r\n    const [loading, setLoading] = useState(false);\r\n    const [title, setTitle] = useState(\"\");\r\n    const [text, setText] = useState(\"\");\r\n    const [user, setUser] = useState({});\r\n    const [show, setShow] = useState(false);\r\n    const [postId, setPostId] = useState(\"\");\r\n    const [pastTitle, setPastTitle] = useState(\"\");\r\n    const [pastText, setPastText] = useState(\"\");\r\n    const [posts, setPosts] = useState([]);\r\n    const [deleteId, setDeleteId] = useState(\"\");\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        setUser(JSON.parse(localStorage.getItem('token')));\r\n    }, [])\r\n\r\n    useEffect(() => (\r\n        onSnapshot(query(collection(db, 'posts')), (snapshots) => setPosts(snapshots.docs))\r\n    ), [db]);\r\n\r\n    const DeleteId = (e) => {\r\n        setDeleteId(e.target.value);\r\n    }\r\n    const PostIdPast = (e) => {\r\n        setPostId(e.target.value);\r\n    }\r\n    const changePastTitle = (e) => {\r\n        setPastTitle(e.target.value);\r\n    }\r\n    const changePastText = (e) => {\r\n        setPastText(e.target.value);\r\n    }\r\n    const SetPastPost = () => {\r\n        if(posts) {\r\n            posts.map((post) => {\r\n                if(post.id === postId){\r\n                    setPastText(post.data().text);\r\n                    setPastTitle(post.data().title);\r\n                    // console.log(post);\r\n                }\r\n                // console.log(post.data().title);\r\n            })\r\n        }\r\n        if(pastText){\r\n            alert(\"This post doesn't exist in this list\");\r\n            return\r\n        }\r\n        // console.log(pastText, pastTitle);\r\n        setShow(!show)\r\n    }\r\n    const sendPastPost = async () => {\r\n        if(loading)return\r\n        setLoading(true);\r\n        const docRef = await updateDoc(doc(db, 'posts', postId), {\r\n            id: user.uid,\r\n            title: pastTitle,\r\n            text: pastText,\r\n            timestamp: serverTimestamp(),\r\n        }).then((res) => {\r\n            console.log(res);\r\n            toast(\"Post upload Successfully\")\r\n        })\r\n        .catch((err) => {\r\n            console.log(err);\r\n        })\r\n        setLoading(false);\r\n        setPastText(\"\");\r\n        setPastTitle(\"\");\r\n        setPostId(\"\");\r\n\r\n    }\r\n\r\n    const sendPost = async () => {\r\n        if(loading)return\r\n        setLoading(true);\r\n        const docRef = await addDoc(collection(db, 'posts'), {\r\n            id: user.uid,\r\n            title: title,\r\n            text: text,\r\n            timestamp: serverTimestamp(),\r\n        }).then((res) => {\r\n            console.log(res);\r\n            toast(\"Post upload Successfully\")\r\n        })\r\n        setLoading(false);\r\n        setText(\"\");\r\n        setTitle(\"\");\r\n    }\r\n    const deletePost = async () => {\r\n        await deleteDoc(doc(db, \"posts\", deleteId)).then((res) => {\r\n            toast(\"Delete Successfully\")\r\n        });\r\n        setDeleteId(\"\");\r\n    }\r\n  return (\r\n    <>\r\n    {newPost ? (\r\n        <> \r\n        <div className=\"Container\">\r\n        <div className=\"left\">\r\n            <button className=\"btn-primary _btn btn mb-3\" onClick={() => setNewPost(true)}>\r\n                New Post\r\n            </button>\r\n            <button className=\"btn-primary _btn btn\" onClick={() => setNewPost(false)}>\r\n                Past Post\r\n            </button>\r\n            <button type=\"button\" className=\"btn btn-danger mb-3 mt-3\" data-toggle=\"modal\" data-target=\"#exampleModal\">Delete</button>\r\n        </div>\r\n    </div>\r\n    <div className=\"container\">\r\n        <h1>New Post</h1>\r\n        <div className=\"row\">\r\n            <div className=\"col\">\r\n                    <label htmlFor=\"title\" className='form-group mt-2'>Title</label>\r\n                    <input \r\n                      type=\"text\" \r\n                      placeholder='Enter title'\r\n                      className='form-control'\r\n                      value={title}\r\n                      onChange={(e) => setTitle(e.target.value)}\r\n                      required\r\n                     />\r\n                     <label htmlFor=\"post\" className='form-group mt-2'>New Post</label>\r\n                     <textarea \r\n                      name=\"newpost\"\r\n                      id=\"\"\r\n                      cols=\"30\"\r\n                      rows=\"10\"\r\n                      placeholder='Details...'\r\n                      className='form-control'\r\n                      value={text}\r\n                      onChange={(e) => setText(e.target.value)}\r\n                      required\r\n                    ></textarea>\r\n                {!loading && <button className='_btn btn mt-2'  onClick={() => sendPost()}> Post </button> }\r\n            </div>\r\n        </div>\r\n    </div> \r\n        </>\r\n    ) : (\r\n       <>\r\n       {show ? (\r\n           <> \r\n            <div className=\"Container\">\r\n                <div className=\"left\">\r\n                    <button className=\"btn-primary _btn btn mb-3\" onClick={() => setNewPost(true)}>\r\n                        New Post\r\n                    </button>\r\n                    <button className=\"btn-primary _btn btn\" onClick={() => setNewPost(false)}>\r\n                        Past Post\r\n                    </button>\r\n                    <button type=\"button\" className=\"btn btn-danger mb-3 mt-3\" data-toggle=\"modal\" data-target=\"#exampleModal\"> Delete</button>\r\n\r\n                </div>\r\n            </div>\r\n            <div className=\"container\">\r\n                <h1>Past Post</h1>\r\n                <div className=\"row\">\r\n                    <div className=\"col\">\r\n                        <form action=\"\">\r\n                            <label htmlFor=\"title\" className='form-group mt-2'>Title</label>\r\n                            <input \r\n                            type=\"text\" \r\n                            placeholder='Enter title'\r\n                            className='form-control'\r\n                            value={pastTitle}\r\n                            onChange={changePastTitle}\r\n                            required\r\n                            />\r\n                            <label htmlFor=\"post\" className='form-group mt-2'>New Post</label>\r\n                            <textarea \r\n                            name=\"newpost\"\r\n                            id=\"\"\r\n                            cols=\"30\"\r\n                            rows=\"10\"\r\n                            placeholder='Details...'\r\n                            className='form-control'\r\n                            value={pastText}\r\n                            onChange={changePastText}\r\n                            required\r\n                            ></textarea>\r\n                           {!loading && <button className='_btn btn mt-2'  onClick={() => sendPastPost()}> Post </button> }\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n           </>\r\n       ) : \r\n       (\r\n           <> \r\n           <div className=\"Container\">\r\n                <div className=\"left\">\r\n                    <button className=\"btn-primary _btn btn mb-3\" onClick={() => setNewPost(true)}>\r\n                        New Post\r\n                    </button>\r\n                    <button className=\"btn-primary _btn btn\" onClick={() => setNewPost(false)}>\r\n                        Past Post\r\n                    </button>\r\n                    <button type=\"button\" className=\"btn btn-dange mb-3 mt-3r\" data-toggle=\"modal\" data-target=\"#exampleModal\"> Delete</button>\r\n                </div>\r\n            </div>\r\n            <div className=\"container\">\r\n                <label htmlFor=\"title\" className='form-group mt-2'>Post Id</label>\r\n                <input \r\n                type=\"text\" \r\n                placeholder='Enter id'\r\n                className='form-control'\r\n                value={postId}\r\n                onChange={PostIdPast}\r\n                required\r\n                />\r\n               <button  className='_btn btn mt-2' onClick={() => SetPastPost()}> Click </button> \r\n            </div>\r\n           </>\r\n       )}\r\n       </>\r\n    )}\r\n    <ToastContainer />\r\n    {/* <!-- Button trigger modal --> */}\r\n\r\n        {/* <!-- Modal --> */}\r\n        <div class=\"modal fade\" id=\"exampleModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n        <div class=\"modal-dialog\" role=\"document\">\r\n            <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"exampleModalLabel\" style={{color : \"#666\"}}>Delete Post</h5>\r\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n            <label htmlFor=\"title\" className='form-group mt-2' style={{color : \"#666\"}}>Delete Id</label>\r\n              <input \r\n                type=\"text\" \r\n                placeholder='Enter id'\r\n                className='form-control'\r\n                value={deleteId}\r\n                onChange={DeleteId}\r\n                required\r\n            />\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\r\n                <button type=\"button\" class=\"btn btn-danger\" onClick={() => deletePost()}>Delete</button>\r\n            </div>\r\n            </div>\r\n        </div>\r\n        </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Post"]},"metadata":{},"sourceType":"module"}